<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8" />
  <title>주민등록등본 신청서</title>
  <style>
    .row { margin:12px 0; display:flex; gap:16px; align-items:flex-start; }
    .row > label { width:140px; padding-top:8px; }
    .error { color:#b91c1c; font-size:12px; margin-top:6px; }
    .inline { display:flex; gap:12px; align-items:center; }
  </style>
</head>
<body>
<main>
  <h2>주민등록등본 교부 신청</h2>

  <form method="post"
        th:action="@{/residentregistration/preview}"
        th:object="${rrForm}">

    <input type="hidden" th:if="${_csrf != null}"
           th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>

    <!-- 고정: 서버에서 엔티티에 resident_registration 세팅하지만, 폼에도 유지 -->
    <input type="hidden" th:field="*{docType}" value="resident_registration"/>
    <input type="hidden" th:field="*{consentYn}" th:value="*{consentYn} ?: 'N'"/>

    <section class="section">
      <div class="row">
        <label for="applicantName">성명</label>
        <div style="flex:1">
          <input id="applicantName" type="text" th:field="*{applicantName}" placeholder="홍길동"/>
          <div class="error" th:if="${#fields.hasErrors('applicantName')}" th:errors="*{applicantName}"></div>
        </div>
      </div>

      <div class="row">
        <label>주민등록번호</label>
        <div class="inline">
          <input type="text" th:field="*{rrnFront}" maxlength="6" style="width:100px" placeholder="앞6자리">
          <span>-</span>
          <input type="text" th:field="*{rrnBack}" maxlength="7" style="width:110px" placeholder="뒤7자리">
        </div>
      </div>

      <div class="row">
        <label for="address1">기본 주소</label>
        <div style="flex:1">
          <input id="address1" type="text" th:field="*{address1}" placeholder="도로명 주소">
          <div class="error" th:if="${#fields.hasErrors('address1')}" th:errors="*{address1}"></div>
        </div>
      </div>

      <div class="row">
        <label for="address2">상세 주소</label>
        <div style="flex:1">
          <input id="address2" type="text" th:field="*{address2}" placeholder="상세 주소">
        </div>
      </div>

      <div class="row">
        <label for="phone">연락처</label>
        <div style="flex:1">
          <input id="phone" type="tel" th:field="*{phone}" placeholder="010-1234-5678">
          <div class="error" th:if="${#fields.hasErrors('phone')}" th:errors="*{phone}"></div>
        </div>
      </div>

      <div class="row">
        <label>전부 포함</label>
        <div class="inline">
          <label><input type="radio" th:field="*{includeAll}" value="ALL"> 전부</label>
          <label><input type="radio" th:field="*{includeAll}" value="PART"> 부분</label>
        </div>
        <div class="error" th:if="${#fields.hasErrors('includeAll')}" th:errors="*{includeAll}"></div>
      </div>

      <!-- 필요한 나머지 옵션들도 th:field로 동일하게… (생략 가능) -->
    </section>

    <div class="inline" style="justify-content:flex-end; gap:10px;">
      <button type="submit">미리보기</button>
    </div>
  </form>
</main>
</body>
</html>
