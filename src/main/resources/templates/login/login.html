<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>로그인 페이지</title>
    <link rel="stylesheet" th:href="@{/login/css/login.css}">

</head>

<body>
    <div id="wrapper">
        <div class="wrap">
            <header class="first-box">
                <div class="home-link">
                    <a href="/portal" class="home-btn"><span>노원구청 바로가기</span></a>
                </div>
                <h1 class="title-box"><span class="title">노원구청<em>통합로그인</em></span></h1>
                <div class="desc-box">
                    <p><span>노원구청 홈페이지에 방문해주신 여러분을 환영합니다.</span><br />
                        <em class="em-sky">회원가입 및 로그인</em>을 하시면 회원님들에게 제공되는 신청, 접수 등 다양한 콘텐츠를 이용하실 수 있습니다. <br>
                        회원가입을 하지 않고 휴대폰본인인증, 아이핀인증을 하는 경우 <em class="em-sky">게시판 글쓰기 등으로 이용이 제한</em>됩니다.
                    </p>
                    <span><span class="skip">안내사항</span> 정보통신망 이용촉진 및 정보보호 등에 관한 법률 제44조의5(게시판 이용자의 본인 확인) 및 전자정부법 시행령
                        제12조(민원인 등의 본인 확인)</span>
                </div>
            </header>
            <div id="container">
                <div class="form-box">
                    <div class="form-wrap">
                        <ul class="form-list clearfix">
                            <li class="form-item n01">
                                <span class="form-title">회원 로그인</span>
                                <form action="/login" id="loginForm" method="post">
                                    <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
                                    <div class="login-inp-box">
                                        <div class="login-inp id">
                                            <label for="userId"></label>
                                            <input type="text" name="userId" id="userId" placeholder="아이디 입력">
                                        </div>
                                        <div class="login-inp userPasswd">
                                            <label for="password"></label>
                                            <input type="password" name="password" id="password" class="password-input"
                                                placeholder="비밀번호 입력">
                                            <button type="button" name="pw-hide" id="pw-hide" class="btn-view">
                                                <span class="skip">비밀번호 표시 안함</span>
                                            </button>
                                        </div>
                                        <button type="submit" class="login-inp-btn">로그인</button>
                                        <div class="find-wrap clearfix">
                                            <a href="/signup" class="find-anchor">회원가입</a>
                                            <a href="/findAccount" class="find-anchor"
                                                onclick="openFindPopup(event)">아이디/비밀번호 찾기</a>
                                        </div>
                                    </div>
                                </form>
                            </li>
                            <li class="form-item n02">
                                <span class="form-title">SNS 로그인</span>
                                <div class="btn-box">
                                    <button type="button" class="check-btn naver" onclick="onNaverLogin()">네이버 간편
                                        로그인</button>
                                    <button type="button" class="check-btn kakao" onclick="onKakaoLogin()">카카오 간편
                                        로그인</button>
                                    <p class="login-caution">
                                        SNS로그인을 사용하시려면 회원가입이 필수이며, <em class="em-pink">최초 1회 계정인증</em>이 필요합니다
                                    </p>
                                </div>
                            </li>
                            <li class="form-item n03">
                                <span class="form-title">비회원 로그인</span>
                                <div class="btn-box">
                                    <button type="button" class="check-btn phone">휴대폰 본인인증</button>
                                    <button type="button" class="check-btn ipin">아이핀 인증</button>
                                    <p class="login-caution">
                                        본인 명의의 휴대폰 본인인증을 통해 로그인하는 경우 <br>
                                        일부 홈페이지 서비스 이용이 제한됩니다. <br>
                                        PASS 앱이 없으신 분은 휴대폰 인증시 인증창 하단의 <br>
                                        문자(SMS)로 인증하기"를 선택하여 인증해주세요.
                                    </p>
                                </div>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
            <footer id="footer">
                <div class="footer-inner">
                    <div class="footer-info">
                        <p class="address">[01689] 서울시 노원구 노해로 437(상계동)</p>
                        <p class="tel">TEL <span>02-2116-3114 (120 다산콜센터로 연결)</span> <em>|</em> <span>02-2116-3000,3301
                                (야간,공휴일/당직실)</span> <em>|</em> <span>FAX 02-2116-4666</span></p>
                    </div>
                    <div class="copyright">
                        <p>
                            COPYRIGHT ⓒ NOWON-GU OFFICE ALL RIGHT RESERVED
                        </p>
                    </div>
                </div>
            </footer>
        </div>

    </div>
    <script>
        function openFindPopup(e) {
            e.preventDefault(); // 기본 링크 이동 막기
            window.open('/findAccount', 'findPopup', 'width=600,height=700,scrollbars=yes,resizable=no');
        }

        function onNaverLogin() { 
            location.href = '/oauth/naver/login'; 
        }

        function onKakaoLogin() { 
            location.href = '/oauth/kakao/login'; 
        }


        (function () {
            const btn = document.getElementById('pw-hide');
            const input = document.getElementById('password');
            const label = btn.querySelector('.skip'); // 화면낭독용 텍스트

            function togglePw() {
                const nowShow = !btn.classList.contains('view'); // 보이기 전환 여부
                // 1) input type 토글
                input.type = nowShow ? 'text' : 'password';
                // 2) 아이콘(스프라이트) 토글
                btn.classList.toggle('view', nowShow);
                // 3) 접근성 텍스트/상태
                label.textContent = nowShow ? '비밀번호 표시 중 (클릭하면 숨김)' : '비밀번호 표시 안함';
                btn.setAttribute('aria-pressed', String(nowShow));
                btn.setAttribute('aria-label', nowShow ? '비밀번호 숨기기' : '비밀번호 보이기');
            }

            // 클릭으로 토글
            btn.addEventListener('click', togglePw);
            // 키보드(Enter/Space)도 지원
            btn.addEventListener('keydown', (e) => {
                if (e.key === 'Enter' || e.key === ' ') {
                    e.preventDefault();
                    togglePw();
                }
            });
        })();

        // ✅ 회원가입 / SNS 연동 완료 안내
        (function () {
            const p = new URLSearchParams(location.search);
            if (p.get('linkedSns') === '1') {
                alert('회원가입과 SNS 연동이 완료되었습니다. 이제 소셜 로그인 버튼으로 바로 로그인할 수 있습니다.');
            } else if (p.get('joined') === '1') {
                alert('회원가입이 완료되었습니다. 로그인해 주세요.');
            }
        })();
    </script>
</body>

</html>